<?php

namespace Tests\Mocks;

use GuzzleHttp\Client;
use GuzzleHttp\Psr7\Response;
use Psr\Http\Message\ResponseInterface;

class ClientMock extends Client
{
    public array $history = [];
    public function get($uri, array $options = []): ResponseInterface {
        $this->history[] = ['method' => 'GET', 'uri' => $uri, 'options' => $options];
        if (preg_match('/games\/.*\/users/', $uri) === 1) {
            return new Response(body: '{"1":{"id":4,"nickname":"Heroyt","code":"1-8HRT8","arena":1,"email":"heroyt@hotnet.cz","stats":{"gamesPlayed":1070,"arenasPlayed":4,"rank":954,"averageAccuracy":45.57,"averagePosition":2.05,"maxAccuracy":97,"maxScore":56575,"maxSkill":3533,"shots":128152,"averageShots":228.03,"averageShotsPerMinute":17.47,"totalMinutes":7337,"kd":1.44,"hits":50118,"deaths":34768},"connections":[{"type":"laserforce","identifier":"20-1-950"},{"type":"mylasermaxx","identifier":"https://my.lasermaxx.com/profile/101908812558977279102"}],"title":{"id":11,"name":"Mistr sniper","description":null,"rarity":"mythic","unlocked":false},"avatar":"<?xml version=\"1.0\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 180 180\" fill=\"none\" shape-rendering=\"auto\" class=\"player-avatar\"><metadata xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\"><rdf:RDF><rdf:Description><dc:title>Bottts</dc:title><dc:creator>Pablo Stanley</dc:creator><dc:source xsi:type=\"dcterms:URI\">https://bottts.com/</dc:source><dcterms:license xsi:type=\"dcterms:URI\">https://bottts.com/</dcterms:license><dc:rights>Remix of &#x201E;Bottts&#x201D; (https://bottts.com/) by &#x201E;Pablo Stanley&#x201D;, licensed under &#x201E;Free for personal and commercial use&#x201D; (https://bottts.com/)</dc:rights></rdf:Description></rdf:RDF></metadata><mask id=\"viewboxMask\"><rect width=\"180\" height=\"180\" rx=\"90\" ry=\"90\" x=\"0\" y=\"0\" fill=\"#fff\"/></mask><g mask=\"url(#viewboxMask)\"><g transform=\"translate(0 66)\"><mask id=\"sidesRound-a\" style=\"mask-type:luminance\" maskUnits=\"userSpaceOnUse\" x=\"12\" y=\"16\" width=\"156\" height=\"45\"><g fill=\"#fff\"><ellipse cx=\"150\" cy=\"38.5\" rx=\"18\" ry=\"22.5\"/><ellipse cx=\"18\" cy=\"22.5\" rx=\"18\" ry=\"22.5\" transform=\"matrix(-1 0 0 1 48 16)\"/></g></mask><g mask=\"url(#sidesRound-a)\"><path d=\"M0 0h180v76H0V0Z\" fill=\"#3949ab\"/><path d=\"M0 0h180v76H0V0Z\" fill=\"#fff\" fill-opacity=\".3\"/><path fill=\"#000\" fill-opacity=\".2\" d=\"M20 0h140v76H20z\"/></g></g><g transform=\"translate(41)\"><mask id=\"topAntenna-a\" style=\"mask-type:luminance\" maskUnits=\"userSpaceOnUse\" x=\"38\" y=\"5\" width=\"24\" height=\"47\"><path d=\"M38 38c0-1.1.9-2 2-2h20a2 2 0 0 1 2 2v14H38V38ZM48 5h4v31h-4z\" fill=\"#fff\"/></mask><g mask=\"url(#topAntenna-a)\"><path d=\"M0 0h100v52H0V0Z\" fill=\"#3949ab\"/><path d=\"M0 3h100v52H0V3Z\" fill=\"#fff\" fill-opacity=\".3\"/><path fill=\"#fff\" fill-opacity=\".2\" d=\"M38 36h24v16H38z\"/></g><circle cx=\"50\" cy=\"8\" r=\"8\" fill=\"#FFE65C\"/><circle cx=\"53\" cy=\"5\" r=\"3\" fill=\"#fff\"/></g><g transform=\"translate(25 44)\"><mask id=\"faceSquare03-a\" style=\"mask-type:luminance\" maskUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"130\" height=\"120\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M0 18A18 18 0 0 1 18 0h94a18 18 0 0 1 18 18v27.15a40 40 0 0 1-2.28 13.31L110.24 108a18 18 0 0 1-16.98 12H36.74a18 18 0 0 1-16.98-12L2.28 58.45A40 40 0 0 1 0 45.15V18Z\" fill=\"#fff\"/></mask><g mask=\"url(#faceSquare03-a)\"><path d=\"M-2-2h134v124H-2V-2Z\" fill=\"#3949ab\"/><g transform=\"translate(-1 -1)\"><path d=\"M15 0h-4v18h4V0ZM23 0h-4v34h53.42a5 5 0 1 0 0-4H23V0Z\" fill=\"#000\" fill-opacity=\".1\"/><path d=\"M122 34.58a5 5 0 1 0-4 0V64h23v-4h-19V34.58Z\" fill=\"#fff\" fill-opacity=\".2\"/><path d=\"M114 46h-4v26h31v-4h-27V46ZM27 103.58a5 5 0 1 1 4 0V133H8v-4h19v-25.42Z\" fill=\"#000\" fill-opacity=\".2\"/></g></g></g><g transform=\"translate(52 124)\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M18 10.22C18 21.78 24.47 28 38 28c13.52 0 20-6.34 20-17.78C58 9.5 57.17 8 55 8H21c-2.05 0-3 1.38-3 2.22Z\" fill=\"#000\" fill-opacity=\".8\"/><mask id=\"mouthSmile02-a\" style=\"mask-type:luminance\" maskUnits=\"userSpaceOnUse\" x=\"18\" y=\"8\" width=\"40\" height=\"20\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M18 10.22C18 21.78 24.47 28 38 28c13.52 0 20-6.34 20-17.78C58 9.5 57.17 8 55 8H21c-2.05 0-3 1.38-3 2.22Z\" fill=\"#fff\"/></mask><g mask=\"url(#mouthSmile02-a)\"><rect x=\"30\" y=\"2\" width=\"16\" height=\"14\" rx=\"2\" fill=\"#fff\"/></g></g><g transform=\"translate(38 76)\"><rect y=\"11\" width=\"104\" height=\"34\" rx=\"17\" fill=\"#000\" fill-opacity=\".8\"/><circle cx=\"29\" cy=\"28\" r=\"13\" fill=\"#F1EEDA\"/><circle cx=\"75\" cy=\"28\" r=\"13\" fill=\"#F1EEDA\"/><rect x=\"24\" y=\"23\" width=\"10\" height=\"10\" rx=\"2\" fill=\"#000\" fill-opacity=\".8\"/><rect x=\"70\" y=\"23\" width=\"10\" height=\"10\" rx=\"2\" fill=\"#000\" fill-opacity=\".8\"/></g></g></svg>\n"},"2":{"id":5,"nickname":"Sofčilka","code":"1-SOFKA","arena":1,"email":"sofca.stara@gmail.com","stats":{"gamesPlayed":865,"arenasPlayed":3,"rank":744,"averageAccuracy":21.12,"averagePosition":3.95,"maxAccuracy":82,"maxScore":17350,"maxSkill":1850,"shots":171673,"averageShots":369.19,"averageShotsPerMinute":28.01,"totalMinutes":6130,"kd":1.14,"hits":30868,"deaths":27185},"connections":[{"type":"mylasermaxx","identifier":"https://my.lasermaxx.com/profile/112033346182459431787"},{"type":"laserforce","identifier":"20-1-951"}],"title":{"id":19,"name":"Nekompromisní vraždící stroj","description":null,"rarity":"legendary","unlocked":false},"avatar":"<?xml version=\"1.0\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 980 980\" fill=\"none\" shape-rendering=\"auto\" class=\"player-avatar\"><desc>\"Lorelei\" by \"Lisa Wischofsky\", licensed under \"CC0 1.0\". / Remix of the original. - Created with dicebear.com</desc><metadata xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"><rdf:RDF><cc:Work><dc:title>Lorelei</dc:title><dc:creator><cc:Agent rdf:about=\"https://www.instagram.com/lischi_art/\"><dc:title>Lisa Wischofsky</dc:title></cc:Agent></dc:creator><dc:source>https://www.figma.com/community/file/1198749693280469639</dc:source><cc:license rdf:resource=\"https://creativecommons.org/licenses/zero/1.0/\"/></cc:Work></rdf:RDF></metadata><mask id=\"viewboxMask\"><rect width=\"980\" height=\"980\" rx=\"490\" ry=\"490\" x=\"0\" y=\"0\" fill=\"#fff\"/></mask><g mask=\"url(#viewboxMask)\"><g transform=\"translate(10 -60)\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M668 255a406 406 0 0 0-207-40c-18 2-36 4-53 11-20-2-39 2-58 9-11 4-21 8-31 14a206 206 0 0 0-79 85l-10 16-15 27c-8 18-14 35-18 54l-7 40-5 32a625 625 0 0 1-31 109l-6 19c-8 26-14 54-15 81-1 22 2 45 11 65 5 10 12 20 21 27 9 6 19 8 30 9l10 14 7 10 7 10c8 9 18 16 28 21h9c3-2 3-6 4-9v-24c15 16 36 29 59 31 12-1 25-2 37-5 2-1 4 0 6 1h2c11 6 24 10 37 9 3 0 6-1 8-3 1-2 1-3-1-5-6-3-10-7-15-12 32-8 65-13 98-11 26 1 52 6 77 12l18 3c9 3 17 5 26 5 21 1 42-6 60-17 19-11 36-24 50-41l-11 22-6 8a332 332 0 0 0-7 13c4 0 6-1 9-3l1-1c14-11 25-26 32-42l8-26c9 16 16 33 20 51l1 19a448 448 0 0 0 1 6c0 2 0 5 2 6h4c4-4 8-10 10-15a214 214 0 0 0 8-118l-1-11-5-29-3-19-5-24a766 766 0 0 1-6-38l-2-12v-2l-5-38v-3l-3-42 1-35v-8c2-16 4-34 0-49-2-10-6-19-11-28-4-9-9-18-17-24l-4-1 6 16 5 12c6 20 7 42 6 63l-4-11v-2l-19-53a1549 1549 0 0 0-42-99l-11-22-1-3c-1-2-2-5-5-5ZM197 532l2-20-4 17-1 3c-9 32-19 63-30 94v2c-10 28-17 57-19 87-2 18 0 38 6 55 4 10 10 21 19 28 6 5 13 7 21 9l-2-4a158 158 0 0 1-21-83c1-30 5-59 10-88l6-27 7-34 6-38v-1Z\" fill=\"#000000\"/><path d=\"M486 236c57-2 115 18 159 56a209 209 0 0 1 73 190c-1 4-1 8-4 12l-1-3v-33a215 215 0 0 0-172-206 235 235 0 0 0-270 153c-12 37-14 78-6 116 6-2 12-2 17-2 2 1 5 1 6 3s0 3-1 4l-12 4c-14 3-27 8-37 18a63 63 0 0 0-22 45c0 12 3 24 8 35 8 13 19 24 33 31 18 10 41 13 62 7 2-1 4-2 6-1s3 4 4 6l15 30a215 215 0 0 0 72 63c28 15 59 21 90 26 3 1 8 1 10 4 1 2 0 3-2 4l-11 1a231 231 0 0 1-147-62c5 18 8 36 8 54 0 12-2 23-6 34-5 10-11 18-19 26a196 196 0 0 1-60 43c-1-1 1-2 2-3l17-14c13-12 25-23 35-38a93 93 0 0 0 17-65l-4-39-2-10-12-17c-5-10-11-20-13-31a93 93 0 0 1-96-31 81 81 0 0 1-19-51c0-12 3-23 8-34 9-16 23-29 40-36-8-31-8-62-3-93 8-40 26-77 51-108 45-54 115-87 186-88Z\" fill=\"#000\"/><path d=\"M541 252a214 214 0 0 1 172 206v33c-1 5-2 10-1 15-2 2-3 3-3 5-3 18-1 37 1 55 4 29 6 59 2 88-3 28-13 56-30 79-16 21-38 34-62 43-15 6-30 9-45 13-11 2-22 4-32 8 1 2 4 1 6 2 12 1 24-1 36-2-5 8-8 17-9 26-2 10 2 19 9 26 6 7 15 11 24 14 5 2 11 3 17 3 7 9 13 18 14 30 2 12-1 24-8 34-9 14-22 23-37 30-18 9-38 15-57 18a352 352 0 0 1-192-23c-18-10-38-23-48-42-4-7-8-16-6-24 18-10 33-23 47-38 8-8 14-16 19-26 4-11 6-22 6-34 0-18-3-36-8-54a235 235 0 0 0 147 62l11-1c2-1 3-2 2-4-2-3-7-3-10-4-31-5-62-11-90-26-18-10-36-22-50-37-8-8-16-17-22-26l-15-30c-1-2-2-5-4-6s-4 0-6 1a82 82 0 0 1-95-38c-5-11-8-23-8-35 1-17 9-34 22-45 10-10 23-15 37-18l12-4c1-1 2-2 1-4s-4-2-6-3c-5 0-11 0-17 2-8-38-6-79 6-116a236 236 0 0 1 270-153Z\" fill=\"#ffffff\"/><path d=\"m712 506 3 3 1 13 3 45c3 20 5 40 5 60 0 16-1 32-5 47-6 28-20 56-40 76a174 174 0 0 1-88 46c-1 9-4 16-4 25-1 6 2 10 5 15 8 8 18 14 28 19l18 9c-3 3-8 1-12 2-6 0-12-1-17-3-9-3-18-7-24-14-7-7-11-16-9-26 1-9 4-18 9-26-12 1-24 3-36 2-2-1-5 0-6-2 10-4 21-6 32-8 15-4 30-7 45-13 24-9 46-22 62-43 17-23 27-51 30-79 4-29 2-59-2-88-2-18-4-37-1-55 0-2 1-3 3-5ZM262 566c6 0 12 1 15 6 2 3 2 7 1 10-3 8-9 14-11 22-1 4 0 7 3 9 7 5 16 7 24 10l-2 2h-11c-6-1-12-2-17-5-5-4-9-11-7-18 2-9 9-15 12-23-7-4-14-2-20-8 3-4 8-6 13-5Z\" fill=\"#000\"/><path d=\"M665 473c7-1 15-1 22 3 6 4 10 9 11 16l17 3c-4 4-11 6-17 6-5 0-11-1-15-4l-10-8c-6-3-11-2-17 0 3 3 6 6 7 10 4 12 3 25-2 36l10-5c1 6-1 10-5 13-8 9-21 10-33 10-4-1-10-3-12-7-3-4-1-8-3-12s-1-9 0-13a70 70 0 0 1 47-48ZM457 484c27 1 52 18 64 42 2 2 3 6 1 9-3 0-5-4-7-6-6-10-14-18-23-24-10-6-21-8-32-8 6 10 9 22 8 33-1 9-5 19-12 25l9 4c-6 3-12 3-18 2-11-3-21-8-30-15-9-6-16-15-19-25-14 0-29-2-43-8 3-2 5-2 8-2l28-4c4-1 8-1 11-4 15-13 35-20 55-19Z\" fill=\"#000000\"/><path d=\"M496 375c10 1 20 4 27 11 3 3 5 7 6 11-11-5-22-6-33-6-6 1-12 4-17 7-23 12-43 29-66 41l-20 14-11 11c-1-5 1-10 2-14 4-10 11-17 19-24l24-17c13-9 27-19 41-26 9-4 18-8 28-8ZM701 411c-6 3-11 3-17 4-5 1-10 3-14 6-9 7-17 15-24 24-9 10-17 18-29 24l-7 2c-2 1-4 0-6 2-4 5-4 13-9 17-2 0-2-2-2-3v-13c1-5 3-12 7-16s9-4 13-8l15-10 23-18c6-5 13-10 20-13 10-3 21-3 30 2Z\" fill=\"#000000\"/><path d=\"M609 602c1 9-4 16-9 23-4 3-9 6-15 6s-13-3-19-5c-4-2-8-3-11-6l5-4c9-1 17 3 25 4 4 0 7-3 9-6 5-5 9-10 15-12Z\" fill=\"#000000\"/><path d=\"M608 667c2 0 4 0 5 2l-1 15c5-1 10-4 16-2 0 4-4 7-7 9l-35 12c-17 4-34 7-51 8-7 1-15-1-22-3-2-1-4-1-4-4 4-2 9 0 12-1 2-5 7-7 11-10l31-19c3-1 7-4 10-4 4-1 7 4 11 4 8-2 16-7 24-7ZM607 712c1 4 1 8-1 11-2 5-7 9-12 11-6 2-12 3-18 2-2 0-6-2-6-5 1-2 5-2 7-3 8-4 18-7 25-13 2-1 3-3 5-3Z\" fill=\"#000000\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M669 255a406 406 0 0 0-196-41 247 247 0 0 0-66 12c-14-2-29 0-42 4-26 8-50 24-70 42-33 29-58 65-73 106-8 22-13 45-13 68 0 20 5 40 16 58a74 74 0 0 0 36 30l2 2a741 741 0 0 0-3 53c-2 26-2 53-1 79 2 29 5 60 14 89 5 17 12 34 22 49 14 22 34 39 57 51 15 8 32 15 49 14 3 0 7-1 9-3 1-3-2-4-4-6l-2-1c-14-10-22-24-30-39-14-29-25-60-29-92-4-39-4-79-3-118v-1l1-39 2-61c10-2 19-6 27-11 13-6 24-16 34-26a178 178 0 0 0 55-117l1-22v-3a968 968 0 0 0 150 92 515 515 0 0 0 130 40l3 1 5-1 15-16v-1l2-4c3-25 0-52-8-76-12-39-37-73-69-98v-1c-7-5-13-10-21-13ZM442 373l-6 11-1 4c-12 22-25 43-44 60l-23 16c-6 5-13 8-21 11l-1 6v11l4-2h2c10-4 19-10 27-17 14-11 27-24 37-40 11-15 18-33 23-51l1-3 2-6Z\" fill=\"#000000\"/></g><g transform=\"translate(10 -60)\"/></g></svg>\n"},"5":{"id":185,"nickname":"Vladimiros","code":"0-667LQ","arena":null,"email":"vladimiros@seznam.cz","stats":{"gamesPlayed":48,"arenasPlayed":3,"rank":271,"averageAccuracy":9.08,"averagePosition":5.42,"maxAccuracy":19,"maxScore":3600,"maxSkill":728,"shots":20530,"averageShots":427.71,"averageShotsPerMinute":34.33,"totalMinutes":598,"kd":0.76,"hits":1714,"deaths":2246},"connections":[{"type":"mylasermaxx","identifier":"https://my.lasermaxx.com/profile/113389494571588238966"}],"title":{"id":55,"name":"Agent 47","description":null,"rarity":"uncommon","unlocked":false},"avatar":"<?xml version=\"1.0\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 120 120\" fill=\"none\" shape-rendering=\"auto\" class=\"player-avatar\"><desc>\"Bottts\" by \"Pablo Stanley\", licensed under \"Free for personal and commercial use\". / Remix of the original. - Created with dicebear.com</desc><metadata xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"><rdf:RDF><cc:Work><dc:title>Bottts</dc:title><dc:creator><cc:Agent rdf:about=\"https://twitter.com/pablostanley\"><dc:title>Pablo Stanley</dc:title></cc:Agent></dc:creator><dc:source>https://bottts.com/</dc:source><cc:license rdf:resource=\"https://bottts.com/\"/></cc:Work></rdf:RDF></metadata><mask id=\"viewboxMask\"><rect width=\"120\" height=\"120\" rx=\"60\" ry=\"60\" x=\"0\" y=\"0\" fill=\"#fff\"/></mask><g mask=\"url(#viewboxMask)\"><rect fill=\"#ffb300\" width=\"120\" height=\"120\" x=\"0\" y=\"0\"/><g transform=\"translate(22 68)\"><rect x=\"4\" y=\"5\" width=\"68\" height=\"22\" rx=\"5\" fill=\"#000\" fill-opacity=\".2\"/><rect x=\"8\" y=\"9\" width=\"60\" height=\"14\" rx=\"2\" fill=\"#000\" fill-opacity=\".6\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"m20 17 6-8H14l6 8ZM32 17l6-8H26l6 8ZM44 17l6-8H38l6 8ZM56 17l6-8H50l6 8Z\" fill=\"#E1E6E8\"/></g><g transform=\"translate(8 20)\"><g fill=\"#fff\"><circle cx=\"21\" cy=\"30\" r=\"15\" fill-opacity=\".1\"/><circle cx=\"83\" cy=\"30\" r=\"15\" fill-opacity=\".1\"/><circle cx=\"21\" cy=\"30\" r=\"12\" fill-opacity=\".1\"/><circle cx=\"83\" cy=\"30\" r=\"12\" fill-opacity=\".1\"/><circle cx=\"21\" cy=\"30\" r=\"6\" fill-opacity=\".8\"/><circle cx=\"83\" cy=\"30\" r=\"6\" fill-opacity=\".8\"/><circle cx=\"21\" cy=\"30\" r=\"3\" fill-opacity=\".8\"/><circle cx=\"83\" cy=\"30\" r=\"3\" fill-opacity=\".8\"/></g></g></g></svg>\n"}}');
        }
        if (str_contains($uri, '/api/vests')) {
            return new Response(body: '[{"vestNum":"1","system":"evo5","status":"ok","info":null,"updatedAt":{"date":"2024-07-07 13:03:46.185466","timezone_type":3,"timezone":"UTC"}},{"vestNum":"2","system":"evo5","status":"playable","info":"test","updatedAt":{"date":"2024-07-07 13:03:46.185466","timezone_type":3,"timezone":"UTC"}},{"vestNum":"3","system":"evo5","status":"broken","info":"error","updatedAt":{"date":"2024-07-07 13:03:46.185466","timezone_type":3,"timezone":"UTC"}}]');
        }
        parent::get($uri, $options);
    }

    public function post($uri, array $options = []): ResponseInterface {
        $this->history[] = ['method' => 'POST', 'uri' => $uri, 'options' => $options];
        return new Response();
    }
}
